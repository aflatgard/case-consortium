<html>
    {{ partial "header.html" . }}
    <body id="tops">

        <!-- Header -->
        {{ partial "header_section.html" . }}
        <!-- Main -->
            <div id="main">
             
                <div id="facets"></div>
                <div id="results"></div>
               <!---->
                <!-- One -->
                    <section id="one">
                        
                            <header class="major">
                                <h2>Cases</h2>
                            </header>
                            
                            <table class="alt">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Topic</th>
                                   <th>Internal Link</th>
                                </tr>
                            </thead>
                                {{ range .Data.Pages.ByTitle }}
                                  
                                <tr>
                                    
                                    <td><a target="_blank" class="repo-url" href="{{.Site.Params.case_repo_baseurl}}{{ .Params.id }}/casestudy/www/layout/standard.asp%3fcase_id={{.Params.id}}.html">{{ .Title|safeHtml }}</a>
                                      <div class="hidden">
                                        {{ .Content }}
                                      </div>
                                    </td>
                                   <td>{{ range .Params.case_topics }}
                                          {{ . }}, <br/>
                                        {{ end }}
                                  </td>
                                  <td><a href="{{ .Permalink }}">{{ .Title|safeHtml}}</a></td>
                                </tr>
                                
                                {{ end }}
                            </table>
                                
                        
                    </section>

            </div>
            
              
            
            <script data-export="true" data-file-extension="js" id="facetize">
                    $.getJSON('/js/api/cases.json').success(function(cases){
                            window.Cases = cases;
                        }).error(function(){
                            alert('there was a problem loading the cases.')
                        })
                    jQuery(document).ready(function(){
                         
                        var item_template = 
                           '<div class="item">' +
                             '<img src="<%= obj.imageURL %>">' +
                             '<h4 class="unescape"><%= obj.title %></h4>' + 
                             '<p class="tags">' + 
                             '<% if (obj.category) {  %><%= obj.category %><% } %>' +
                             '</p>' +
                             '<p class="desc"><%= obj.description %></p>' +
                             '<p class="item-id"><%= obj.id %></p>' +
                             '<p class="item-topics">Topics: </br><% for(var topic in obj.topics)' +
                             '{ %> <%= obj.topics[topic] %><span class="comma-sep">,</span> <% } %></p>' +
                           '</div>';
                        settings = { 
                          items            : Cases.cases,
                          facets           : { 
                                              'topics'     : 'What topic',
                          },  
                          resultSelector   : '#results',
                          facetSelector    : '#facets',
                          resultTemplate   : item_template,
                          paginationCount  : 10,
                          orderByOptions   : {'topic': 'Topic', 'title': 'Title'},
                          //facetSortOption  : {'continent': ["North America", "South America"]}
                        }   

                        // use them!
                        jQuery.facetelize(settings);

                        //string unescape hack
                        jQuery('.unescape').each(function(){
                                var text = jQuery(this).text();
                                jQuery(this).html(text);
                            })
                    });
            </script>
        {{ partial "footer.html" . }}

    </body>

</html>

